name: Self-test

on:
  workflow_dispatch:
    inputs:
      test:
        type: string
        default: 'false'
        description: A test flag.
      test_mode:
        type: string
        default: 'success'
        description: Test mode (success or failure)
      sleep_seconds:
        type: string
        default: '10'
        description: Seconds to sleep

jobs:
  wait:
    name: Wait
    runs-on: ubuntu-latest
    steps:
    - name: Sleep
      run: sleep ${{ inputs.sleep_seconds || '10' }}
    - name: Fail if requested
      if: ${{ inputs.test_mode == 'failure' }}
      run: exit 1
    - name: Success
      run: echo "Test completed successfully"
